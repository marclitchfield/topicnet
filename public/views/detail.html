<div ng-controller="DetailController">
	<div class="row">
		<div class="span6">
			<div class="well">
				<h3 ng-hide="editingTitle" ng-dblclick="editingTitle=true">{{ topic.name }}</h3>
				<h3 ng-show="editingTitle">
					<form class="form-inline">
						<input type="text" class="input-large" ng-model="editedTopicName"></input>
						<button class="btn btn-primary" ng-click="update(); editingTitle=false">Save</button>
						<button class="close" ng-click="editingTitle=false">&times;</button>
					</form>
				</h3>
				<ul class="unstyled">
					<li ng-repeat="resource in topic.resources">
						<a href="#/resources/{{ resource.id }}">{{ resource.title }}</a>
						<p>{{ resource.source }}</p>
					</li>
				</ul>
		        <button class="btn" data-toggle="modal" href="#resourceForm"><i class="icon-plus"></i></button>
			</div>

			<div ng-controller="SubTopicController">
				<h4>sub topics</h4>
				<ul class="unstyled">
					<li ng-repeat="subTopic in topic.sub">
						<a href="#/detail/{{ subTopic.id }}">{{ subTopic.name }}</a>
						<button class="close" ng-click="removeLink(topic, subTopic)">&times;</button>
					</li>
				</ul>

				<div ng-include src="'partials/add-topic.html'" />
			</div>
		</div>

		<div class="span3" ng-controller="NextTopicController">
			<h4>next</h4>
			<ul class="unstyled">
				<li ng-repeat="nextTopic in topic.next">
					<a href="#/detail/{{ nextTopic.id }}">{{ nextTopic.name }}</a>
					<button class="close" ng-click="removeLink(topic, nextTopic)">&times;</button>
				</li>
			</ul>

			<div ng-include src="'partials/add-topic.html'" />
		</div>
	</div>
</div>


<div id="resourceForm" class="modal fade">
	<form>
		<div class="modal-header">
			<h4>Add a resource</h4>
		</div>
		<div class="modal-body" ng-controller="AddResourceController">
			<input type="text" class="input-xlarge" ng-model="url" placeholder="URL"></input>
			<input type="text" class="input-xlarge" ng-model="title" placeholder="Title"></input>
			<input type="text" class="input-xlarge" ng-model="source" placeholder="Source"></input>
		</div>
		<div class="modal-footer">
			<button class="btn btn-primary" data-dismiss="modal" ng-click="add()">Save</button>
			<button class="btn" data-dismiss="modal">Cancel</button>
		</div>
	</form
</div>	