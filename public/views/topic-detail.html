<div class="row ng-cloak" ng-cloak>
	<div class="span5 offset1">
		<h3 ng-hide="editingTitle" ng-dblclick="editingTitle=true">{{ topic.name }}</h3>
		<h3 ng-show="editingTitle">
			<form class="form-inline">
				<input type="text" class="input-large" ng-model="editedTopicName"></input>
				<button class="btn btn-primary" ng-click="update(); editingTitle=false">Save</button>
				<button class="close" ng-click="editingTitle=false">&times;</button>
			</form>
		</h3>
		<ul class="unstyled">
			<li class="topic-resource" ng-repeat="resource in topic.resources | orderBy:'-score'">
				<div class="vote-buttons">
					<span class="score">{{ resource.score }}</span>
					<a ng-click="upvote(resource)">▲</a>
					<a ng-click="downvote(resource)">▼</a>
				</div>
				<div class="resource-info">
					<div class="verb-icon"><i data-verb="{{ resource.verb }}" class="icon-white"/></div>
					<a class="title" href="#/resources/{{ resource.id }}">{{ resource.title }}</a>
					<span class="source">{{ resource.source }}</span>
				</div>
			</li>
		</ul>
        <a class="btn" href="#/topics/{{ topic.id }}/resources/add"><i class="icon-plus"></i> Resource</a>
	</div>

	<div class="span5 nav-area tabbable">
		<ul class="nav nav-tabs">
			<li class="active"><a href="#sub-topic-pane" data-toggle="tab">sub topics</a></li>
			<li><a href="#next-topic-pane" data-toggle="tab">next topics</a></li>
		</ul>

		<div class="tab-content">
 			<div class="tab-pane active" id="sub-topic-pane" ng-controller="RelatedTopicController" ng-init="rel='sub'">
				<div ng-include src="'partials/related-topic-list.html'" />
				<div ng-include src="'partials/add-topic.html'" />
			</div>

 			<div class="tab-pane" id="next-topic-pane" ng-controller="RelatedTopicController" ng-init="rel='next'">
				<div ng-include src="'partials/related-topic-list.html'" />
				<div ng-include src="'partials/add-topic.html'" />
			</div>
		</div>
	</div>
</div>
